@model DnsRecordServiceModel

<style>
  .dns-results-wrapper {
        margin: 20px auto;
        padding: 20px;
        background-color: rgba(0, 0, 0, 0.5);;
        border-radius: 8px;
        box-shadow: 0px 0px 10px 5px rgba(0, 0, 0, 0.5);
        border: 1px solid black;
    }

    .dns-record {
        margin-bottom: 20px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: rgba(77,73,73,0.5);
    }

      
      
    .dns-record.expanded {
        max-height: 500px; /* Set a value greater than the expected height of the expanded content */  
    }

    .dns-record h4 {
        margin-top: 0;
        font-size: 20px;
        color: #007bff;
    }

    .dns-record p {
        font-size: 16px;
        line-height: 1.6;
        margin: 8px 0;
    }

    .dns-record ul {
        margin-top: 0;
        padding-left: 20px;
    }

    .dns-record ul li {
        list-style-type: disc;
        margin-bottom: 5px;
    }

    hr {
        border: none;
        border-top: 1px solid #ddd;
        margin: 20px 0;
    }
</style>

<div class="dns-results-wrapper mt-5">
    <h1 class="text-light">Results for <span class="text-success">@Model.DomainName</span></h1>
    @foreach (var record in Model.Records.SelectMany(recordCollection => recordCollection))
    {
        <div class="dns-record">
            
            <h2 class="text-light">@record.RecordType records</h2>
            <hr/>
            @switch (record.RecordType.ToString())
            {
                case "NS":
                {
                    var nsRecord = record as NsRecord;
                    <p class="text-light">NSDN NAME: @nsRecord!.NSDName</p>
                    break;
                }
                case "TXT":
                {
                    var txtRecord = record as TxtRecord;
            
                    foreach (var text in txtRecord!.EscapedText)
                    {
                        <p class="text-light">@text</p>
                    }
            
                    break;
                }
                case "MX":
                {
                    var mxRecord = record as MxRecord;
                    <p class="text-light">Exchange: @mxRecord!.Exchange</p>
                    break;
                }
                case "SOA":
                {
                    var soaRecord = record as SoaRecord;
                    <p class="text-light">Responsible Email: @soaRecord!.RName</p>
                    <p class="text-light">Serial: @soaRecord.Serial</p>
            
                    break;
                }
                case "AAAA":
                {
                    var aaaaRecord = record as AaaaRecord;
                    <p class="text-light">@aaaaRecord!.Address</p>
                    break;
                }
            }
            
            <p class="text-light">Domain Name: @record.DomainName</p>
            <p class="text-light">Record Class: @record.RecordClass</p>
            <p class="text-light">Record Raw Data Length: @record.RawDataLength</p>
            <p class="text-light">Record TTL: @record.TimeToLive</p>
            <p class="text-light">Record Initial TTL: @record.InitialTimeToLive</p>
        </div>
    }
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('.dns-record').click(function() {
            let $recordContent = $(this).find('.dns-record');
            let isExpanded = $(this).hasClass('expanded');
            
            console.log('click');
            
            if (isExpanded) {
                // Collapse the record
                $recordContent.slideUp(300, function() {
                    $(this).closest('.dns-results-wrapper').removeClass('expanded');
                });
            } else {
                // Expand the record
                $recordContent.slideDown(300, function() {
                    $(this).closest('.dns-results-wrapper').addClass('expanded');
                });
            }
        });
    });
</script>
